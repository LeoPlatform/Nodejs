<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>RStreams Node SDK - v6.0.12</title><meta name="description" content="Documentation for RStreams Node SDK - v6.0.12"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script><link rel="stylesheet" href="assets/rstreams.css"/><link rel="icon" type="image/x-icon" href="assets/favicon.png"/></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><div class="toolbarcontainer container dflex align-c"><a href="https://rstreams.org" class="title ml10"><img src="assets/rstreams-logo.png"/></a><div class="dflex align-c fg1 flexcenter"><a href="index.html" class="title sitename header-color">Node SDK</a></div><div id="tsd-search" data-base="." class="mr10"><label for="tsd-search-field" style="display:none" class="tsd-widget search">Search</label><div class="field"><input type="text" id="tsd-search-field" placeholder="Search here..."/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul></div><div id="tsd-widgets" class="mr10"><div id="tsd-filter"><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div><div class="container container-main"><div class="row"><div class="col-8 col-content"><div><div class="dflex mt-minus30"><div id="tsd-widgets" class="mr10" style="display:none"><input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget ws-nowrap dflex align-c ht17" for="tsd-filter-inherited">Inherited</label></div><div id="tsd-widgets2" class="mr10" style="display:none"><input type="checkbox" id="tsd-show-legend"/><label class="tsd-widget ws-nowrap dflex align-c ht17" for="tsd-show-legend">Legend</label></div></div><h1 class="mt0 header-color"> RStreams Node SDK - v6.0.12 </h1></div><div id="legend-countainer"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div></div><div class="tsd-panel tsd-typography"><p>A Node/Typescript SDK that pushes data to and pulls data from an instance of an RStreams bus.</p>
<p>Full documentation and getting started guide here: <a href="https://rstreams.org/rstreams-node-sdk/">https://rstreams.org/rstreams-node-sdk/</a></p>
<p>For this SDK API documentation, get started with the <a href="classes/index.RStreamsSdk.html">RStreamsSdk</a>.</p>

<a href="#put" id="put" style="color: inherit; text-decoration: none;">
  <h2>Put</h2>
</a>
<p>Send events one at a time to an instance of the RStreams bus.</p>
<p><a href="https://rstreams.org/rstreams-node-sdk/sdk-apis/standalone-ops/put/">Put Operation documentation</a></p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">ConfigurationResources</span><span class="hl-1">, </span><span class="hl-2">RStreamsSdk</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;leo-sdk&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">PersonRaw</span><span class="hl-1">, </span><span class="hl-2">PersonRawResults</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;../lib/types&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">axios</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;axios&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">rsdk</span><span class="hl-1">: </span><span class="hl-7">RStreamsSdk</span><span class="hl-1">  = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">RStreamsSdk</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">person</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-5">getRandomPerson</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">rsdk</span><span class="hl-1">.</span><span class="hl-5">putEvent</span><span class="hl-1">(</span><span class="hl-3">&#39;rstreams-example.load-people&#39;</span><span class="hl-1">, </span><span class="hl-3">&#39;rstreams-example.people&#39;</span><span class="hl-1">, </span><span class="hl-2">person</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">getRandomPerson</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">PersonRaw</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">NUM_EVENTS</span><span class="hl-1"> = </span><span class="hl-8">1</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">url</span><span class="hl-1"> = </span><span class="hl-3">`https://randomuser.me/api/?results=</span><span class="hl-4">${</span><span class="hl-6">NUM_EVENTS</span><span class="hl-4">}</span><span class="hl-3">&amp;exc=login,registered,phone,cell,picture,id&amp;noinfo`</span><span class="hl-1">;</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> {</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">status</span><span class="hl-1">} = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">axios</span><span class="hl-1">.</span><span class="hl-5">get</span><span class="hl-1">&lt;</span><span class="hl-7">PersonRawResults</span><span class="hl-1">&gt;(</span><span class="hl-2">url</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">status</span><span class="hl-1"> !== </span><span class="hl-8">200</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-3">&#39;Unable to get randomPeople from https://randomuser.me API: &#39;</span><span class="hl-1"> + </span><span class="hl-2">status</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-5">log</span><span class="hl-1">(</span><span class="hl-3">&#39;Person: &#39;</span><span class="hl-1"> + </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">results</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">].</span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-2">first</span><span class="hl-1"> + </span><span class="hl-3">&#39; &#39;</span><span class="hl-1"> + </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">results</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">].</span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-2">last</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">results</span><span class="hl-1">[</span><span class="hl-8">0</span><span class="hl-1">];</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-5">main</span><span class="hl-1">();</span><br/><span class="hl-1">})()</span>
</code></pre>

<a href="#enrich" id="enrich" style="color: inherit; text-decoration: none;">
  <h2>Enrich</h2>
</a>
<p>Read events from one queue, modify them and send them on to another queue of the RStreams bus.</p>
<p><a href="https://rstreams.org/rstreams-node-sdk/sdk-apis/standalone-ops/enrich/">Enrich Operation documentation</a></p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">EnrichOptions</span><span class="hl-1">,  </span><span class="hl-2">RStreamsSdk</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;leo-sdk&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Person</span><span class="hl-1">, </span><span class="hl-2">PersonRaw</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;../lib/types&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">axios</span><span class="hl-1"> </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;axios&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">rsdk</span><span class="hl-1">: </span><span class="hl-7">RStreamsSdk</span><span class="hl-1">  = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">RStreamsSdk</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">opts</span><span class="hl-1">: </span><span class="hl-7">EnrichOptions</span><span class="hl-1">&lt;</span><span class="hl-7">PersonRaw</span><span class="hl-1">, </span><span class="hl-7">Person</span><span class="hl-1">&gt;  = {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&#39;rstreams-example.people-to-peopleplus&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">inQueue:</span><span class="hl-1"> </span><span class="hl-3">&#39;rstreams-example.people&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">outQueue:</span><span class="hl-1"> </span><span class="hl-3">&#39;rstreams-example.peopleplus&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-3">&#39;z/2022/04/20&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">config:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">limit:</span><span class="hl-1"> </span><span class="hl-8">2</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-5">transform</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-2">person</span><span class="hl-1">: </span><span class="hl-7">PersonRaw</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">p</span><span class="hl-1">: </span><span class="hl-7">Person</span><span class="hl-1"> = </span><span class="hl-5">translate</span><span class="hl-1">(</span><span class="hl-2">person</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-5">addCountryCode</span><span class="hl-1">(</span><span class="hl-2">p</span><span class="hl-1">);</span><br/><span class="hl-1">      </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">;</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  };</span><br/><br/><span class="hl-1">  </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">rsdk</span><span class="hl-1">.</span><span class="hl-5">enrichEvents</span><span class="hl-1">&lt;</span><span class="hl-7">PersonRaw</span><span class="hl-1">, </span><span class="hl-7">Person</span><span class="hl-1">&gt;(</span><span class="hl-2">opts</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-7">CountryCode</span><span class="hl-1"> {</span><span class="hl-2">cca2</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">;}</span><br/><br/><span class="hl-9">/**</span><br/><span class="hl-9"> * </span><span class="hl-4">@param</span><span class="hl-9"> </span><span class="hl-2">person</span><span class="hl-9"> The person to add addr.countryCode to by calling a public API to</span><br/><span class="hl-9"> *               turn a country name in a 2 digit country code (iso cca2)</span><br/><span class="hl-9"> */</span><br/><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">addCountryCode</span><span class="hl-1">(</span><span class="hl-2">person</span><span class="hl-1">: </span><span class="hl-7">Person</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">void</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">url</span><span class="hl-1"> = </span><span class="hl-3">`https://restcountries.com/v3.1/name/</span><span class="hl-4">${</span><span class="hl-2">person</span><span class="hl-10">.</span><span class="hl-2">addr</span><span class="hl-10">.</span><span class="hl-2">country</span><span class="hl-4">}</span><span class="hl-3">?fullText=true&amp;fields=cca2`</span><span class="hl-1">;    </span><br/><span class="hl-1">    </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">cc</span><span class="hl-1">: </span><span class="hl-7">CountryCode</span><span class="hl-1"> = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">axios</span><span class="hl-1">.</span><span class="hl-5">get</span><span class="hl-1">(</span><span class="hl-2">url</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-2">person</span><span class="hl-1">.</span><span class="hl-2">addr</span><span class="hl-1">.</span><span class="hl-2">countryCode</span><span class="hl-1"> = </span><span class="hl-2">cc</span><span class="hl-1">.</span><span class="hl-2">cca2</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><br/><span class="hl-9">/**</span><br/><span class="hl-9"> * </span><span class="hl-4">@param</span><span class="hl-9"> </span><span class="hl-2">p</span><span class="hl-9"> The type from the public API we want to modify</span><br/><span class="hl-9"> * </span><span class="hl-4">@returns</span><span class="hl-9"> The new type that is flatter and gets rid of some attributes don&#39;t need</span><br/><span class="hl-9"> */</span><br/><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">translate</span><span class="hl-1">(</span><span class="hl-2">p</span><span class="hl-1">: </span><span class="hl-7">PersonRaw</span><span class="hl-1">): </span><span class="hl-7">Person</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">return</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">gender:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">gender</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">firstName:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-2">first</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">lastName:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">.</span><span class="hl-2">last</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">email:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">email</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">birthDate:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">dob</span><span class="hl-1">.</span><span class="hl-2">date</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">nationality:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">nat</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">addr:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">addr1:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">street</span><span class="hl-1">.</span><span class="hl-2">number</span><span class="hl-1"> + </span><span class="hl-3">&#39; &#39;</span><span class="hl-1"> + </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">street</span><span class="hl-1">.</span><span class="hl-2">name</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">city:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">city</span><span class="hl-1">, </span><br/><span class="hl-1">      </span><span class="hl-2">state:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">state</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">country:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">country</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">postcode:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">postcode</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">longitude:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">coordinates</span><span class="hl-1">.</span><span class="hl-2">longitude</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">latitude:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">coordinates</span><span class="hl-1">.</span><span class="hl-2">latitude</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">tzOffset:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">timezone</span><span class="hl-1">.</span><span class="hl-2">offset</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">tzDesc:</span><span class="hl-1"> </span><span class="hl-2">p</span><span class="hl-1">.</span><span class="hl-2">location</span><span class="hl-1">.</span><span class="hl-2">timezone</span><span class="hl-1">.</span><span class="hl-2">description</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-5">main</span><span class="hl-1">();</span><br/><span class="hl-1">})()</span>
</code></pre>

<a href="#offload" id="offload" style="color: inherit; text-decoration: none;">
  <h2>Offload</h2>
</a>
<p>Stream data down from an RStreams bus queue at scale, optionally modify it and send it to another source such as a database or file.</p>
<p><a href="https://rstreams.org/rstreams-node-sdk/sdk-apis/standalone-ops/offload/">Offload Operation documentation</a></p>
<pre><code class="language-typescript"><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">OffloadOptions</span><span class="hl-1">,  </span><span class="hl-2">RStreamsSdk</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;leo-sdk&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> { </span><span class="hl-2">Person</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;../lib/types&quot;</span><span class="hl-1">;</span><br/><span class="hl-0">import</span><span class="hl-1"> </span><span class="hl-2">axios</span><span class="hl-1">, { </span><span class="hl-2">AxiosResponse</span><span class="hl-1"> } </span><span class="hl-0">from</span><span class="hl-1"> </span><span class="hl-3">&quot;axios&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">main</span><span class="hl-1">() {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">rsdk</span><span class="hl-1">: </span><span class="hl-7">RStreamsSdk</span><span class="hl-1">  = </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-5">RStreamsSdk</span><span class="hl-1">();</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">opts</span><span class="hl-1">: </span><span class="hl-7">OffloadOptions</span><span class="hl-1">&lt;</span><span class="hl-7">Person</span><span class="hl-1">&gt;  = {</span><br/><span class="hl-1">    </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-3">&#39;rstreams-example.offload-one-peopleplus&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">inQueue:</span><span class="hl-1"> </span><span class="hl-3">&#39;rstreams-example.people&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-3">&#39;z/2022/04/20&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">limit:</span><span class="hl-1"> </span><span class="hl-8">2</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-5">transform</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-2">person</span><span class="hl-1">: </span><span class="hl-7">Person</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-5">savePerson</span><span class="hl-1">(</span><span class="hl-2">person</span><span class="hl-1">);</span><br/><span class="hl-1">        </span><span class="hl-0">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;        </span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  };</span><br/><br/><span class="hl-1">  </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">rsdk</span><span class="hl-1">.</span><span class="hl-5">offloadEvents</span><span class="hl-1">&lt;</span><span class="hl-7">Person</span><span class="hl-1">&gt;(</span><span class="hl-2">opts</span><span class="hl-1">);</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-4">interface</span><span class="hl-1"> </span><span class="hl-7">PostResponse</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">success</span><span class="hl-1">: </span><span class="hl-7">boolean</span><span class="hl-1">;</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-9">/**</span><br/><span class="hl-9"> * </span><span class="hl-4">@param</span><span class="hl-9"> </span><span class="hl-2">person</span><span class="hl-9"> Save the person to another system.</span><br/><span class="hl-9"> */</span><br/><span class="hl-4">async</span><span class="hl-1"> </span><span class="hl-4">function</span><span class="hl-1"> </span><span class="hl-5">savePerson</span><span class="hl-1">(</span><span class="hl-2">person</span><span class="hl-1">: </span><span class="hl-7">Person</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-7">void</span><span class="hl-1">&gt; {</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">url</span><span class="hl-1"> = </span><span class="hl-3">`https://run.mocky.io/v3/83997150-ab13-43da-9fb9-66051ba06c10?mocky-delay=500ms`</span><span class="hl-1">;    </span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> {</span><span class="hl-6">data</span><span class="hl-1">, </span><span class="hl-6">status</span><span class="hl-1">}: </span><span class="hl-7">AxiosResponse</span><span class="hl-1">&lt;</span><span class="hl-7">PostResponse</span><span class="hl-1">, </span><span class="hl-7">any</span><span class="hl-1">&gt; = </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-2">axios</span><span class="hl-1">.</span><span class="hl-5">post</span><span class="hl-1">&lt;</span><span class="hl-7">PostResponse</span><span class="hl-1">&gt;(</span><span class="hl-2">url</span><span class="hl-1">, </span><span class="hl-2">person</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-0">if</span><span class="hl-1"> (</span><span class="hl-2">status</span><span class="hl-1"> !== </span><span class="hl-8">200</span><span class="hl-1"> || !</span><span class="hl-2">data</span><span class="hl-1"> || </span><span class="hl-2">data</span><span class="hl-1">.</span><span class="hl-2">success</span><span class="hl-1"> !== </span><span class="hl-4">true</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-0">throw</span><span class="hl-1"> </span><span class="hl-4">new</span><span class="hl-1"> </span><span class="hl-7">Error</span><span class="hl-1">(</span><span class="hl-3">&#39;Saving person to external system failed&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> () </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-0">await</span><span class="hl-1"> </span><span class="hl-5">main</span><span class="hl-1">();</span><br/><span class="hl-1">})()</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Modules</a></li><li class=" tsd-kind-module"><a href="modules/index.html">index</a></li><li class=" tsd-kind-module"><a href="modules/lib_cron.html">lib/cron</a></li><li class=" tsd-kind-module"><a href="modules/lib_dynamodb.html">lib/dynamodb</a></li><li class=" tsd-kind-module"><a href="modules/lib_rstreams_config_provider_chain.html">lib/rstreams-<wbr/>config-<wbr/>provider-<wbr/>chain</a></li><li class=" tsd-kind-module"><a href="modules/lib_rstreams_configuration.html">lib/rstreams-<wbr/>configuration</a></li><li class=" tsd-kind-module"><a href="modules/lib_streams.html">lib/streams</a></li><li class=" tsd-kind-module"><a href="modules/lib_types.html">lib/types</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script><script src="assets/rstreams.js"></script></body></html>