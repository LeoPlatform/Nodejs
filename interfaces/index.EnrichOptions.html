<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>EnrichOptions | leo-sdk</title><meta name="description" content="Documentation for leo-sdk"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">leo-sdk</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">leo-sdk</a></li><li><a href="../modules/index.html">index</a></li><li><a href="index.EnrichOptions.html">EnrichOptions</a></li></ul><h1>Interface EnrichOptions&lt;T, U&gt; </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><div class="lead">
<p>These options for an <a href="../classes/index.RStreamsSdk.html#enrich"><code>RStreamsSdk.enrich</code></a> pipeline step.
This reads events from one queue and writes them to another queue.  Put another way,
an enrich pipeline operations reads events from an <code>inQueue</code> and then writes them to an <code>outQueue</code>,
allowing for side effects or transformation in the process.</p>
</div><dl class="tsd-comment-tags"><dt>see</dt><dd><p><a href="../classes/index.RStreamsSdk.html#enrich"><code>RStreamsSdk.enrich</code></a></p>
</dd><dt>see</dt><dd><p><a href="../classes/index.RStreamsSdk.html#enrichEvents"><code>RStreamsSdk.enrichEvents</code></a></p>
</dd></dl></div></section><section class="tsd-panel tsd-type-parameters"><h3>Type parameters</h3><ul class="tsd-type-parameters"><li><h4>T</h4><div class="tsd-comment tsd-typography"><div class="lead">
<p>The type of the event read from the source <code>inQueue</code></p>
</div></div></li><li><h4>U</h4><div class="tsd-comment tsd-typography"><div class="lead">
<p>The type of the event that will be written to the destination <code>outQueue</code></p>
</div></div></li></ul></section><section class="tsd-panel tsd-hierarchy"><h3>Hierarchy</h3><ul class="tsd-hierarchy"><li><a href="index.WriteOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">WriteOptions</a><ul class="tsd-hierarchy"><li><span class="target">EnrichOptions</span><ul class="tsd-hierarchy"><li><a href="index.EnrichBatchOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">EnrichBatchOptions</a></li></ul></li></ul></li></ul></section><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Properties</h3><ul class="tsd-index-list"><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#config" class="tsd-kind-icon">config</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#firehose" class="tsd-kind-icon">firehose</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#force" class="tsd-kind-icon">force</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#id" class="tsd-kind-icon">id</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#inQueue" class="tsd-kind-icon">in<wbr/>Queue</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#outQueue" class="tsd-kind-icon">out<wbr/>Queue</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#records" class="tsd-kind-icon">records</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#size" class="tsd-kind-icon">size</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#start" class="tsd-kind-icon">start</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#time" class="tsd-kind-icon">time</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#useS3" class="tsd-kind-icon">use<wbr/>S3</a></li></ul></section><section class="tsd-index-section "><h3>Methods</h3><ul class="tsd-index-list"><li class="tsd-kind-method tsd-parent-kind-interface"><a href="index.EnrichOptions.html#transform" class="tsd-kind-icon">transform</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Properties</h2><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="config" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> config<a href="#config" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">config<span class="tsd-signature-symbol">?:</span> <a href="index.ReadOptions.html" class="tsd-signature-type" data-tsd-kind="Interface">ReadOptions</a></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L407">lib/lib.d.ts:407</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Fine-grained control of reading from the source <code>inQueue</code></p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a id="firehose" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> firehose<a href="#firehose" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">firehose<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><aside class="tsd-sources"><p>Inherited from <a href="index.WriteOptions.html">WriteOptions</a>.<a href="index.WriteOptions.html#firehose">firehose</a></p><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L85">lib/lib.d.ts:85</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>If true, firehose will be used.  Firehose batches events sent to it to an S3 file in 1 minute
increments, which of course adds at least a one minute latency. However, firehose can take a vast number
of concurrent writes compared to kinesis.  So, use this when you have a giant number of concurrent events
you wish to write, where a giant number is X events per X amount of time.</p>
</div><div><p>An RStreams Bus system bot reads the 1 minute batched S3 files written to firehose, separates the events
in the file into separate S3 files by queue and then sends a single event to kinesis for each resulting
queue-specific S3 file. From there, processing continues as if events were sent to kinesis using s3.</p>
<p>If this and <code>s3</code> are present, firehose will be used.</p>
</div><dl class="tsd-comment-tags"><dt>default</dt><dd><p>false</p>
</dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a id="force" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> force<a href="#force" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">force<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><aside class="tsd-sources"><p>Inherited from <a href="index.WriteOptions.html">WriteOptions</a>.<a href="index.WriteOptions.html#force">force</a></p><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L130">lib/lib.d.ts:130</a></li></ul></aside></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="id" class="tsd-anchor"></a><h3 class="tsd-anchor-link">id<a href="#id" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">id<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L382">lib/lib.d.ts:382</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The name of the bot that this code is acting as.  The SDK will use it to query to the bot Dynamo DB
table to pull checkpoints and to checkpoint for you.</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="inQueue" class="tsd-anchor"></a><h3 class="tsd-anchor-link">in<wbr/>Queue<a href="#inQueue" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">in<wbr/>Queue<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L385">lib/lib.d.ts:385</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The source queue from which events will be read</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="outQueue" class="tsd-anchor"></a><h3 class="tsd-anchor-link">out<wbr/>Queue<a href="#outQueue" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">out<wbr/>Queue<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L388">lib/lib.d.ts:388</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The destination queue into which events will be written</p>
</div></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a id="records" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> records<a href="#records" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">records<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><p>Inherited from <a href="index.WriteOptions.html">WriteOptions</a>.<a href="index.WriteOptions.html#records">records</a></p><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L98">lib/lib.d.ts:98</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The number of records, where each record is an event, to micro-batch locally in the SDK before writing
them to either kinesis, firehose or S3.  See the other options in this object to understand how this
might be useful.</p>
</div><div><p>The SDK will write events as soon as one of the <code>records</code>, <code>size</code> or <code>time</code> conditions are met.</p>
</div><dl class="tsd-comment-tags"><dt>default</dt><dd><p>kinesis 100 records (events)</p>
</dd><dt>default</dt><dd><p>S3 1 file</p>
</dd><dt>default</dt><dd><p>firehose 10,000 records (events)</p>
</dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a id="size" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> size<a href="#size" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">size<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">number</span></div><aside class="tsd-sources"><p>Inherited from <a href="index.WriteOptions.html">WriteOptions</a>.<a href="index.WriteOptions.html#size">size</a></p><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L110">lib/lib.d.ts:110</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The number of bytes to micro-batch locally in the SDK before writing them to either kinesis, firehose or S3.
See the other options in this object to understand how this might be useful.</p>
</div><div><p>The SDK will write events as soon as one of the <code>records</code>, <code>size</code> or <code>time</code> conditions are met.</p>
</div><dl class="tsd-comment-tags"><dt>default</dt><dd><p>kinesis 200k</p>
</dd><dt>default</dt><dd><p>S3 unbounded</p>
</dd><dt>default</dt><dd><p>firehose 900k</p>
</dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface"><a id="start" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> start<a href="#start" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">start<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L404">lib/lib.d.ts:404</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The event ID of the starting position to read from with in the queue.  It is common to not provide
this because each queue is stateful in that it remembers the last read position of a bot.  Then,
as bots read they make a call back to the RStreams Bus to update the read position.</p>
</div><div><p>Usually, the SDK just handles this for you.  So, if the start isn&#39;t provided, the SDK will just
use the bot&#39;s last read position as the starting point.  So, as bots are invoked, read some events
and do some processing, they automatically update back how far they&#39;ve read to and then the bot shuts
down after a period of time.  When the bot starts back up to read again, it knows where it last read
from and just continues.</p>
</div><dl class="tsd-comment-tags"><dt>see</dt><dd><p><a href="https://rstreams.org/rstreams-guides/core-concepts/fundamentals/#event-id">Fundamentals: Event ID</a></p>
</dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a id="time" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> time<a href="#time" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">time<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">DurationInputArg1</span></div><aside class="tsd-sources"><p>Inherited from <a href="index.WriteOptions.html">WriteOptions</a>.<a href="index.WriteOptions.html#time">time</a></p><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L126">lib/lib.d.ts:126</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The amount of time to micro-batch locally in the SDK before writing events to either kinesis, firehose or S3.
See the other options in this object to understand how this might be useful.</p>
</div><div><p>Note, this type is any one of the <a href="https://momentjs.com/docs/#/durations/">valid durations the Moment JS library</a>
can take: Duration | number | string | FromTo | DurationInputObject.</p>
<p>The SDK will write events as soon as one of the <code>records</code>, <code>size</code> or <code>time</code> conditions are met.</p>
</div><dl class="tsd-comment-tags"><dt>default</dt><dd><p>kinesis 200ms</p>
</dd><dt>default</dt><dd><p>S3 unbounded</p>
</dd><dt>default</dt><dd><p>firehose 900k</p>
</dd></dl></div></section><section class="tsd-panel tsd-member tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a id="useS3" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span class="tsd-flag ts-flagOptional">Optional</span> use<wbr/>S3<a href="#useS3" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">use<wbr/>S3<span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">boolean</span></div><aside class="tsd-sources"><p>Inherited from <a href="index.WriteOptions.html">WriteOptions</a>.<a href="index.WriteOptions.html#useS3">useS3</a></p><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L67">lib/lib.d.ts:67</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>If true, the SDK will write events to S3 and then pass a single event to kinesis whose payload
references the S3 file.  Thus, one actual event flows through Kinesis and that one event is eventually
written to the RStreams bus&#39; events DynamoDB table, still referencing the S3 file full of events.
When reading events, the SDK will detect it has received an event in a queue that is really a reference
to S3 and retrieve the portion of the S3 file needed to fulfill the SDK read request made.</p>
</div><div><p>This can be useful when a very large number of events need to be written all at once or if the
events are large.  However, there is some additional ingestion latency incurred by this approach
and also on reading.  If the size of the S3 files is large, the latency penalty for reading
is negligible for most use cases.  However, waiting to batch up a sufficient number of events
can cause a delay getting events into Kinesis for ingestion.  The rule of thumb is files
around 2mb or larger are fine.  It&#39;s OK if an occasional file is small.  However, creating many small
files should be avoided as it could cause read latency.  For example, if requesting 1000 events
from a queue if every two events are in an S3 file, the SDK will have to retrieve 500 files to read just
1000 events.  Use the other settings to tune the amount of data saved to the file: <code>records</code>, <code>size</code>, <code>time</code>.</p>
<p>NOTE! A new feature, <a href="index.ReadOptions.html#fast_s3_read"><code>ReadOptions.fast_s3_read</code></a>, largely solves the problem
of having lots of small S3 files by enabling the SDK to concurrently read from multiple S3 files.</p>
<p>If this and <code>firehose</code> are present, firehose will be used.</p>
</div><dl class="tsd-comment-tags"><dt>default</dt><dd><p>false</p>
</dd></dl></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Methods</h2><section class="tsd-panel tsd-member tsd-kind-method tsd-parent-kind-interface"><a id="transform" class="tsd-anchor"></a><h3 class="tsd-anchor-link">transform<a href="#transform" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><ul class="tsd-signatures tsd-kind-method tsd-parent-kind-interface"><li class="tsd-signature tsd-kind-icon">transform<span class="tsd-signature-symbol">(</span>this<span class="tsd-signature-symbol">: </span><a href="lib_streams.ProcessFunctionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ProcessFunctionContext</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">U</span><span class="tsd-signature-symbol">&gt;</span>, payload<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type" data-tsd-kind="Type parameter">T</span>, wrapper<span class="tsd-signature-symbol">: </span><a href="lib_types.ReadEvent.html" class="tsd-signature-type" data-tsd-kind="Interface">ReadEvent</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">T</span><span class="tsd-signature-symbol">&gt;</span>, callback<span class="tsd-signature-symbol">?: </span><a href="../modules/lib_streams.html#ProcessCallback" class="tsd-signature-type" data-tsd-kind="Type alias">ProcessCallback</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">U</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../modules/lib_streams.html#ProcessFunctionAsyncReturn" class="tsd-signature-type" data-tsd-kind="Type alias">ProcessFunctionAsyncReturn</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">U</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/LeoPlatform/Nodejs/blob/master/lib/lib.d.ts#L416">lib/lib.d.ts:416</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>The SDK will invoke this function after reading events from the <code>inQueue</code> and will take
the result of this function to send to the destination <code>outQueue</code>.</p>
</div></div><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>this: <a href="lib_streams.ProcessFunctionContext.html" class="tsd-signature-type" data-tsd-kind="Interface">ProcessFunctionContext</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">U</span><span class="tsd-signature-symbol">&gt;</span></h5></li><li><h5>payload: <span class="tsd-signature-type" data-tsd-kind="Type parameter">T</span></h5></li><li><h5>wrapper: <a href="lib_types.ReadEvent.html" class="tsd-signature-type" data-tsd-kind="Interface">ReadEvent</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">T</span><span class="tsd-signature-symbol">&gt;</span></h5></li><li><h5><span class="tsd-flag ts-flagOptional">Optional</span> callback: <a href="../modules/lib_streams.html#ProcessCallback" class="tsd-signature-type" data-tsd-kind="Type alias">ProcessCallback</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">U</span><span class="tsd-signature-symbol">&gt;</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../modules/lib_streams.html#ProcessFunctionAsyncReturn" class="tsd-signature-type" data-tsd-kind="Type alias">ProcessFunctionAsyncReturn</a><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type" data-tsd-kind="Type parameter">U</span><span class="tsd-signature-symbol">&gt;</span><span class="tsd-signature-symbol">&gt;</span></h4></li></ul></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Modules</a></li><li class="current tsd-kind-module"><a href="../modules/index.html">index</a><ul><li class=" tsd-kind-namespace tsd-parent-kind-module"><a href="../modules/index.StreamUtil.html">Stream<wbr/>Util</a></li></ul></li><li class=" tsd-kind-module"><a href="../modules/lib_cron.html">lib/cron</a></li><li class=" tsd-kind-module"><a href="../modules/lib_dynamodb.html">lib/dynamodb</a></li><li class=" tsd-kind-module"><a href="../modules/lib_rstreams_config_provider_chain.html">lib/rstreams-<wbr/>config-<wbr/>provider-<wbr/>chain</a></li><li class=" tsd-kind-module"><a href="../modules/lib_rstreams_configuration.html">lib/rstreams-<wbr/>configuration</a></li><li class=" tsd-kind-module"><a href="../modules/lib_streams.html">lib/streams</a></li><li class=" tsd-kind-module"><a href="../modules/lib_types.html">lib/types</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="current tsd-kind-interface tsd-parent-kind-module tsd-has-type-parameter"><a href="index.EnrichOptions.html" class="tsd-kind-icon">Enrich<wbr/>Options</a><ul><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#config" class="tsd-kind-icon">config</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#firehose" class="tsd-kind-icon">firehose</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#force" class="tsd-kind-icon">force</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#id" class="tsd-kind-icon">id</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#inQueue" class="tsd-kind-icon">in<wbr/>Queue</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#outQueue" class="tsd-kind-icon">out<wbr/>Queue</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#records" class="tsd-kind-icon">records</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#size" class="tsd-kind-icon">size</a></li><li class="tsd-kind-property tsd-parent-kind-interface"><a href="index.EnrichOptions.html#start" class="tsd-kind-icon">start</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#time" class="tsd-kind-icon">time</a></li><li class="tsd-kind-property tsd-parent-kind-interface tsd-is-inherited"><a href="index.EnrichOptions.html#useS3" class="tsd-kind-icon">use<wbr/>S3</a></li><li class="tsd-kind-method tsd-parent-kind-interface"><a href="index.EnrichOptions.html#transform" class="tsd-kind-icon">transform</a></li></ul></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-namespace"><span class="tsd-kind-icon">Namespace</span></li><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li><li class="tsd-kind-type-alias tsd-has-type-parameter"><span class="tsd-kind-icon">Type alias with type parameter</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li><li class="tsd-kind-interface tsd-has-type-parameter"><span class="tsd-kind-icon">Interface with type parameter</span></li><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-interface"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-enum"><span class="tsd-kind-icon">Enumeration</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-class"><span class="tsd-kind-icon">Class</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>